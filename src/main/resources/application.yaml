server:
  port: ${PORT:8080}
  servlet:
    context-path: /api

spring:
  application:
    name: token-gateway
  jackson:
    default-property-inclusion: non_null
    serialization:
      write-dates-as-timestamps: false
      indent-output: true
    deserialization:
      fail-on-unknown-properties: false

jwt:
  secret: ${JWT_SECRET_KEY:dev-secret}
  expiration: 3600000
  timezone: Africa/Kampala

atm:
  server:
    port: ${ATM_SERVER_PORT:7790}
    threads: 20
    socket:
      timeout: 300000

esb:
  base-url: ${BASE_URL:https://sandbox.esb.local}
  auth-endpoint: ${AUTH_URL:/auth}
  account-validation: ${ACCOUNT_VALIDATION:/accounts/validate}
  account-charge: ${ACCOUNT_CHARGE:/accounts/charge}
  connection-timeout: 60000
  read-timeout: 60000
  ssl:
    verify: ${ESB_SSL_VERIFY:false}
  atm:
    username: ${ESB_ATM_USERNAME:devUser}
    password: ${ESB_ATM_PASSWORD:devPass}
    base-url: ${BASE_URL:https://sandbox.esb.local}
    client-id: ${ESB_CLIENT_ID:dev-client}
    client-secret: ${CLIENT_SECRET:dev-secret}

feign:
  client:
    config:
      default:
        connectTimeout: 60000
        readTimeout: 60000
        loggerLevel: full
      esb-client:
        connectTimeout: 60000
        readTimeout: 60000
        loggerLevel: full

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: when-authorized

logging:
  level:
    root: INFO
    com.pridebank.token: DEBUG
    feign: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"

---
spring:
  config:
    activate:
      on-profile: dev

logging:
  level:
    root: DEBUG
    com.pridebank.token: DEBUG
    feign: DEBUG

feign:
  client:
    config:
      esb-client:
        loggerLevel: full

---
spring:
  config:
    activate:
      on-profile: prod
